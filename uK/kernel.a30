;セクション名を設定
.section program,CODE

;各ラベルが外部参照であることを宣言する
.glb _kernel_start
.glb startup

;スタートアップルーチンの処理がここから始まる
startup:

;ハードウェアレジスタを初期化する
	MOV.B	#02h,000Ah	; プロテクトレジスタ←02h
	MOV.B	#41h,0004h	; プロセッサモードレジスタ0← 41h
	MOV.B	#00h,0005h	; プロセッサモードレジスタ1← 00h
	MOV.B	#08h,0008h	; チップセレクト制御レジスタ← 08h 
	MOV.B	#00h,000Ah	; プロテクトレジスタ←00h
	
	JMP	_kernel_start	;ラベル _kernel_start に無条件分岐する
	
	.end				;プログラムの終わり